generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model role {
  id                             Int         @id @default(autoincrement())
  name                           String      @db.VarChar(255)
  team_user_team_user_roleTorole team_user[] @relation("team_user_roleTorole")
}

model subteam {
  id                              Int  @id @default(autoincrement())
  main_team_id                    Int
  subteam_id                      Int
  team_subteam_main_team_idToteam team @relation("subteam_main_team_idToteam", fields: [main_team_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "main_team_fkey")
  team_subteam_subteam_idToteam   team @relation("subteam_subteam_idToteam", fields: [subteam_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "subteam_fkey")

  @@index([main_team_id], map: "fki_main_team_fkey")
  @@index([subteam_id], map: "fki_subteam_fkey")
}

model team {
  id                                 Int         @id @default(autoincrement())
  name                               String      @db.VarChar(255)
  subteam_subteam_main_team_idToteam subteam[]   @relation("subteam_main_team_idToteam")
  subteam_subteam_subteam_idToteam   subteam[]   @relation("subteam_subteam_idToteam")
  team_user                          team_user[]
}

model team_user {
  id                        Int  @id @default(autoincrement())
  team_id                   Int
  user_id                   Int
  role                      Int
  role_team_user_roleTorole role @relation("team_user_roleTorole", fields: [role], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "role_fkey")
  team                      team @relation(fields: [team_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "team_id_fkey")
  user                      user @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "user_id_fkey")

  @@index([role], map: "fki_role_fkey")
  @@index([team_id], map: "fki_team_id_fkey")
  @@index([user_id], map: "fki_user_id_f")
}

model user {
  id        Int         @id @default(autoincrement())
  full_name String      @db.VarChar(255)
  mail      String      @db.VarChar(255)
  password  String      @db.VarChar(255)
  score     Int
  team_user team_user[]
}
